<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>License Analyzer - license.wtf</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="doc-bg">
  <!-- Theme Toggle -->
  <div class="theme-toggle">
    <button id="theme-toggle-btn" class="theme-toggle-btn" title="Toggle theme">
      <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"/>
        <path d="M12 1v2"/>
        <path d="M12 21v2"/>
        <path d="M4.22 4.22l1.42 1.42"/>
        <path d="M18.36 18.36l1.42 1.42"/>
        <path d="M1 12h2"/>
        <path d="M21 12h2"/>
        <path d="M4.22 19.78l1.42-1.42"/>
        <path d="M18.36 5.64l1.42-1.42"/>
      </svg>
      <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
      </svg>
    </button>
  </div>
  <div class="doc-container">
    <a href="index.html" class="doc-back-link">
        <span class="doc-back-arrow" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>
        </span>
        Back to license.wtf
      </a>
    <div class="analyze-header-emoji">üîç</div>
    <h1 class="analyze-title">
      License <span class="analyze-title-green">Analyzer</span>
    </h1>
    <div class="analyze-subtitle">
      Select a popular open source license to see what permissions, conditions, and limitations it offers.
    </div>
    <div class="analyze-card">
      <div class="analyze-label">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
        Choose License
      </div>
      <div class="analyze-subtext">Select from popular open source licenses to analyze their terms and conditions</div>
      <div class="analyze-select-row">
        <select class="analyze-select" id="analyze-select">
          <option value="none" selected>Select a license...</option>
          <option>MIT License</option>
          <option>Apache License 2.0</option>
          <option>GPL-3.0</option>
          <option>BSD-3-Clause</option>
          <option>LGPL-2.1</option>
          <option>AGPL-3.0</option>
          <option>MPL-2.0</option>
          <option>CC0</option>
          <option>Unlicense</option>
          <option>WTFPL</option>
        </select>
        <button class="analyze-btn" id="analyze-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
          Analyze
        </button>
      </div>
    </div>
    <div style="text-align: center; margin-bottom: 2.5rem;">
      <div style="font-weight: 600; color: var(--foreground); margin-bottom: 0.7em; font-size: 1.1rem;">Popular licenses:</div>
      <div class="analyze-popular-row">
        <button class="analyze-pill" data-license="MIT License">MIT</button>
        <button class="analyze-pill" data-license="Apache License 2.0">Apache 2.0</button>
        <button class="analyze-pill" data-license="GPL-3.0">GPL-3.0</button>
        <button class="analyze-pill" data-license="BSD-3-Clause">BSD-3-Clause</button>
      </div>
    </div>
    <div class="analyze-results-title" id="analyze-results-title" style="display: none;">Analysis Results</div>
    <div class="analyze-results-license" id="license-name" style="display: none;"></div>
    <div class="license-params-grid" id="license-params"></div>
  </div>
  <script src="licenseData.js"></script>
  <script>
function renderLicenseGrid(licenseKey) {
  const resultsTitle = document.getElementById('analyze-results-title');
  const licenseName = document.getElementById('license-name');
  if (!licenseKey || licenseKey === 'none') {
    resultsTitle.style.display = 'none';
    licenseName.style.display = 'none';
    licenseName.textContent = '';
    document.getElementById('license-params').innerHTML = '';
    return;
  }
  const license = window.licenseDatabase[licenseKey];
  if (!license) return;
  resultsTitle.style.display = '';
  licenseName.style.display = '';
  licenseName.textContent = license.name;
  const grid = document.getElementById('license-params');
  // Remove animation class if present (for re-triggering)
  grid.classList.remove('slide-down');
  grid.innerHTML = '';
  // Map status to badge color class
  function getBadgeClass(status) {
    switch (status) {
      case 'allowed':
      case 'granted':
      case 'permissive':
      case 'high':
      case 'yes':
      case 'specified':
        return 'badge badge-green';
      case 'required':
      case 'weak':
      case 'medium':
      case 'limited':
        return 'badge badge-orange';
      case 'not-protected':
      case 'not-granted':
      case 'no':
      case 'unspecified':
      case 'restrictive':
      case 'low':
        return 'badge badge-red';
      case 'strong':
      case 'protected':
        return 'badge badge-blue';
      case 'maybe':
        return 'badge badge-maybe';
      case 'not-required':
        return 'badge badge-not-required';
      case 'none':
        return 'badge badge-none';
      default:
        return 'badge';
    }
  }
  for (const [param, value] of Object.entries(license.parameters)) {
    const meta = window.paramMeta[param];
    if (!meta) continue;
    const badgeClass = getBadgeClass(value.status);
    const card = document.createElement('div');
    card.className = 'license-param-card';
    card.innerHTML = `
      <div class="license-param-title-row">
        <span>${meta.icon}</span>
        <span>${meta.title}</span>
      </div>
      <div class="license-param-question">${meta.question}</div>
      <span class="license-param-status ${badgeClass}">${(value.status.charAt(0).toUpperCase() + value.status.slice(1)).replace('-', ' ')}</span>
      ${value.description ? `<div class="license-param-desc">${value.description}</div>` : ''}
      <div class="license-param-impact"><b>Real-world impact:</b><br>${meta.impact}</div>
    `;
    grid.appendChild(card);
  }
  // Force reflow and add animation class
  void grid.offsetWidth; // trigger reflow
  grid.classList.add('slide-down');
}

// --- Analyze Button Logic ---
document.getElementById('analyze-btn').addEventListener('click', function() {
  const select = document.getElementById('analyze-select');
  let key = select.value.toLowerCase().replace(/ /g, '-').replace(/[^a-z0-9\-]/g, '');
  // Map dropdown value to licenseDatabase key
  if (key === 'none') {
    renderLicenseGrid('none');
    return;
  }
  if (key.includes('apache')) key = 'apache-2.0';
  else if (key.includes('mit')) key = 'mit';
  else if (key.includes('gpl-3')) key = 'gpl-3.0';
  else if (key.includes('bsd-3')) key = 'bsd-3-clause';
  else if (key.includes('lgpl')) key = 'lgpl-2.1';
  else if (key.includes('agpl')) key = 'agpl-3.0';
  else if (key.includes('mpl')) key = 'mpl-2.0';
  else if (key === 'cc0') key = 'cc0';
  else if (key === 'unlicense') key = 'unlicense';
  else if (key === 'wtfpl') key = 'wtfpl';
  renderLicenseGrid(key);
});
// --- Pill click logic (already present) ---
document.querySelectorAll('.analyze-pill').forEach(function(pill) {
  pill.addEventListener('click', function() {
    var license = pill.getAttribute('data-license');
    var select = document.getElementById('analyze-select');
    for (var i = 0; i < select.options.length; i++) {
      if (select.options[i].text === license) {
        select.selectedIndex = i;
        break;
      }
    }
    document.getElementById('analyze-btn').click();
  });
});
// --- Initial render: do not show any results by default ---
document.addEventListener('DOMContentLoaded', function() {
  renderLicenseGrid('none');
});

// Theme toggle logic (matches index/documentation)
(function() {
  function setTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
  }
  function getTheme() {
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    return localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');
  }
  function applyThemeFromStorage() {
    setTheme(getTheme());
  }
  document.addEventListener('DOMContentLoaded', function() {
    applyThemeFromStorage();
    var btn = document.getElementById('theme-toggle-btn');
    if (btn) {
      btn.addEventListener('click', function() {
        var current = getTheme();
        var next = current === 'dark' ? 'light' : 'dark';
        setTheme(next);
      });
    }
  });
})();
</script>
</body>
</html> 